@*
    CustomCheckbox - A cross-browser consistent checkbox component
    
    Usage:
    <CustomCheckbox name="option" value="1" checked="true" onchange="handleChange()">
        Check this option
    </CustomCheckbox>
*@

<label class="@GetLabelClasses()">
    <input type="checkbox" class="@GetInputClasses()" @attributes="AdditionalAttributes" />
    <span class="@GetTextClasses()">@ChildContent</span>
</label>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string Class { get; set; } = "";
    [Parameter] public CheckboxSize Size { get; set; } = CheckboxSize.Medium;
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    public enum CheckboxSize
    {
        Small,
        Medium,
        Large
    }

    private string GetLabelClasses()
    {
        var baseClasses = "flex items-center cursor-pointer";
        return $"{baseClasses} {Class}".Trim();
    }

    private string GetInputClasses()
    {
        var baseClasses = @"text-teal-600 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 
                           focus:ring-teal-500 dark:focus:ring-teal-400 focus:ring-2 
                           transition-all duration-200 appearance-none rounded border-2 
                           checked:bg-teal-600 checked:border-teal-600 dark:checked:bg-teal-500 dark:checked:border-teal-500
                           hover:border-slate-400 dark:hover:border-slate-500
                           relative cursor-pointer
                           checked:bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDVMNi41IDEwLjUgNCA4IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K')]
                           bg-no-repeat bg-center";

        var sizeClasses = Size switch
        {
            CheckboxSize.Small => "w-3 h-3 mr-2",
            CheckboxSize.Large => "w-5 h-5 mr-4",
            _ => "w-4 h-4 mr-3"
        };

        return $"{baseClasses} {sizeClasses}".Trim();
    }

    private string GetTextClasses()
    {
        var sizeClasses = Size switch
        {
            CheckboxSize.Small => "text-sm",
            CheckboxSize.Large => "text-lg",
            _ => "text-base"
        };

        return $"font-medium text-slate-900 dark:text-slate-100 {sizeClasses}".Trim();
    }
}